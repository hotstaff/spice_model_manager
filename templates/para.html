<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPICE Parameter Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.0/nouislider.min.js"></script>
    <style>
        .parameter-container {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>SPICE Parameter Editor</h1>
    <form id="parameter-form">
        {% for param in parameters %}
        <div class="parameter-container">
            <label for="{{ param.name }}">{{ param.name }} ({{ param.unit }}):</label>
            <div id="slider-{{ param.name }}"></div>
            <input type="text" id="value-{{ param.name }}" name="{{ param.name }}" value="{{ param.default }}" readonly>
        </div>
        {% endfor %}
        <button type="submit">Submit</button>
    </form>

    <script>
        {% for param in parameters %}
        // スライダーを初期化
        const slider{{ loop.index }} = document.getElementById('slider-{{ param.name }}');
        noUiSlider.create(slider{{ loop.index }}, {
            start: {{ param.default }},
            range: {
                min: {{ param.min }},
                max: {{ param.max }}
            },
            step: 0.01
        });

        // テキストボックスと連動
        const input{{ loop.index }} = document.getElementById('value-{{ param.name }}');
        slider{{ loop.index }}.noUiSlider.on('update', (values) => {
            input{{ loop.index }}.value = values[0];
        });
        {% endfor %}
    </script>
</body>
</html>
